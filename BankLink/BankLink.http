### ============================================================================
### BANKLINK API - COLECCI√ìN DE PRUEBAS COMPLETAS
### ============================================================================
### Instrucciones:
### 1. Ajusta el puerto en @BankLink_HostAddress seg√∫n tu configuraci√≥n
### 2. Ejecuta primero "Registrar nuevo cliente" y "Login"
### 3. Copia el token JWT de la respuesta de Login
### 4. P√©galo en la variable @token (l√≠nea siguiente)
### 5. Todos los endpoints protegidos usar√°n autom√°ticamente ese token
### ============================================================================

@BankLink_HostAddress = http://localhost:5000
@token = tu_token_jwt_aqui

### ============================================================================
### üîê AUTENTICACI√ìN - REGISTRO Y LOGIN
### ============================================================================

### 1Ô∏è‚É£ Registrar nuevo cliente (Cliente 1)
POST {{BankLink_HostAddress}}/api/auth/register
Content-Type: application/json

{
  "nombre": "Juan",
  "apellido": "P√©rez",
  "dni": "12345678",
  "direccion": "Av. Libertador 123",
  "telefono": "1145678901",
  "email": "juan.perez@email.com",
  "nombreUsuario": "juanperez",
  "password": "Password123",
  "rol": "Cliente"
}

### 2Ô∏è‚É£ Registrar segundo cliente (para pruebas de transferencias)
POST {{BankLink_HostAddress}}/api/auth/register
Content-Type: application/json

{
  "nombre": "Mar√≠a",
  "apellido": "Gonz√°lez",
  "dni": "87654321",
  "direccion": "Av. Corrientes 456",
  "telefono": "1123456789",
  "email": "maria.gonzalez@email.com",
  "nombreUsuario": "mariagonzalez",
  "password": "Password456",
  "rol": "Cliente"
}

### 3Ô∏è‚É£ Login con Cliente 1
# ‚ö†Ô∏è IMPORTANTE: Copia el "token" de la respuesta y p√©galo en la variable @token arriba
POST {{BankLink_HostAddress}}/api/auth/login
Content-Type: application/json

{
  "nombreUsuario": "juanperez",
  "password": "Password123"
}

### 4Ô∏è‚É£ Login con Cliente 2
POST {{BankLink_HostAddress}}/api/auth/login
Content-Type: application/json

{
  "nombreUsuario": "mariagonzalez",
  "password": "Password456"
}

### ============================================================================
### üë• CLIENTES (CRUD)
### ============================================================================

### 5Ô∏è‚É£ Obtener todos los clientes
GET {{BankLink_HostAddress}}/api/clientes
Authorization: Bearer {{token}}

### 6Ô∏è‚É£ Obtener cliente por ID
GET {{BankLink_HostAddress}}/api/clientes/1
Authorization: Bearer {{token}}

### 7Ô∏è‚É£ Obtener cliente por DNI
GET {{BankLink_HostAddress}}/api/clientes/dni/12345678
Authorization: Bearer {{token}}

### 8Ô∏è‚É£ Actualizar cliente
PUT {{BankLink_HostAddress}}/api/clientes/1
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "nombre": "Juan Carlos",
  "apellido": "P√©rez",
  "dni": "12345678",
  "direccion": "Av. Libertador 5678",
  "telefono": "1145678901",
  "email": "juan.perez@email.com",
  "nombreUsuario": "juanperez",
  "passHash": "$2a$11$XPZxM5C9zRVN8.K0nYqpG.xF4N8k0HzQJ8iL8nZ8K3kxM8K3nZ8K3",
  "rol": "Cliente"
}

### ============================================================================
### üí≥ CUENTAS (CRUD + Dep√≥sitos/Retiros)
### ============================================================================

### 9Ô∏è‚É£ Crear cuenta para Cliente 1 (Ahorro)
POST {{BankLink_HostAddress}}/api/cuentas
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "tipoCuenta": "Ahorro",
  "idClientePropietario": 1,
  "saldoInicial": 50000.00
}

### üîü Crear segunda cuenta para Cliente 1 (Corriente)
POST {{BankLink_HostAddress}}/api/cuentas
Authorization: Bearer {{token}}

Content-Type: application/json

{
  "tipoCuenta": "Corriente",
  "idClientePropietario": 1,
  "saldoInicial": 20000.00
}

### 1Ô∏è‚É£1Ô∏è‚É£ Crear cuenta para Cliente 2
POST {{BankLink_HostAddress}}/api/cuentas
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "tipoCuenta": "Ahorro",
  "idClientePropietario": 2,
  "saldoInicial": 30000.00
}

### 1Ô∏è‚É£2Ô∏è‚É£ Obtener todas las cuentas
GET {{BankLink_HostAddress}}/api/cuentas
Authorization: Bearer {{token}}

### 1Ô∏è‚É£3Ô∏è‚É£ Obtener cuenta por ID
GET {{BankLink_HostAddress}}/api/cuentas/1
Authorization: Bearer {{token}}

### 1Ô∏è‚É£4Ô∏è‚É£ Obtener cuenta por n√∫mero (reemplaza con n√∫mero generado)
GET {{BankLink_HostAddress}}/api/cuentas/numero/12345678
Authorization: Bearer {{token}}

### 1Ô∏è‚É£5Ô∏è‚É£ Obtener cuentas de un cliente
GET {{BankLink_HostAddress}}/api/cuentas/cliente/1
Authorization: Bearer {{token}}

### 1Ô∏è‚É£6Ô∏è‚É£ Actualizar cuenta
PUT {{BankLink_HostAddress}}/api/cuentas/1
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "numeroCuenta": "12345678",
  "tipoCuenta": "Ahorro",
  "saldoActual": 50000.00,
  "estado": "Activa",
  "idClientePropietario": 1
}

### ============================================================================
### üí∞ DEP√ìSITOS Y RETIROS
### ============================================================================

### 1Ô∏è‚É£7Ô∏è‚É£ Realizar dep√≥sito en cuenta 1
POST {{BankLink_HostAddress}}/api/cuentas/deposito
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "idCuenta": 1,
  "monto": 10000.00,
  "descripcion": "Dep√≥sito en efectivo - Sucursal Centro"
}

### 1Ô∏è‚É£8Ô∏è‚É£ Realizar otro dep√≥sito
POST {{BankLink_HostAddress}}/api/cuentas/deposito
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "idCuenta": 1,
  "monto": 5000.00,
  "descripcion": "Dep√≥sito por cheque"
}

### 1Ô∏è‚É£9Ô∏è‚É£ Realizar retiro
POST {{BankLink_HostAddress}}/api/cuentas/retiro
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "idCuenta": 1,
  "monto": 8000.00,
  "descripcion": "Retiro en cajero autom√°tico"
}

### 2Ô∏è‚É£0Ô∏è‚É£ ‚ùå Intento de retiro con saldo insuficiente (deber√≠a fallar)
POST {{BankLink_HostAddress}}/api/cuentas/retiro
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "idCuenta": 1,
  "monto": 999999.00,
  "descripcion": "Retiro que deber√≠a fallar por saldo insuficiente"
}

### ============================================================================
### üìä MOVIMIENTOS (Consulta de historial)
### ============================================================================

### 2Ô∏è‚É£1Ô∏è‚É£ Obtener todos los movimientos
GET {{BankLink_HostAddress}}/api/movimientos
Authorization: Bearer {{token}}

### 2Ô∏è‚É£2Ô∏è‚É£ Obtener movimiento por ID
GET {{BankLink_HostAddress}}/api/movimientos/1
Authorization: Bearer {{token}}

### 2Ô∏è‚É£3Ô∏è‚É£ Obtener movimientos de una cuenta (extracto bancario)
GET {{BankLink_HostAddress}}/api/movimientos/cuenta/1
Authorization: Bearer {{token}}

### ============================================================================
### üèõÔ∏è BANCOS EXTERNOS
### ============================================================================

### 2Ô∏è‚É£4Ô∏è‚É£ Registrar Banco Externo (compa√±ero 1)
POST {{BankLink_HostAddress}}/api/bancosexternos
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "nombreBanco": "BancoCompa√±ero",
  "codigoIdentificacion": "BCO001",
  "urlApiBase": "http://localhost:5002",
  "descripcion": "API del banco del compa√±ero para integraciones",
  "activo": true
}

### 2Ô∏è‚É£5Ô∏è‚É£ Registrar otro Banco Externo
POST {{BankLink_HostAddress}}/api/bancosexternos
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "nombreBanco": "Banco Naci√≥n",
  "codigoIdentificacion": "BNA001",
  "urlApiBase": "http://localhost:5003",
  "descripcion": "Banco de la Naci√≥n Argentina",
  "activo": true
}

### 2Ô∏è‚É£6Ô∏è‚É£ Obtener todos los bancos externos
GET {{BankLink_HostAddress}}/api/bancosexternos
Authorization: Bearer {{token}}

### 2Ô∏è‚É£7Ô∏è‚É£ Obtener banco externo por ID
GET {{BankLink_HostAddress}}/api/bancosexternos/1
Authorization: Bearer {{token}}

### 2Ô∏è‚É£8Ô∏è‚É£ Obtener banco externo por c√≥digo
GET {{BankLink_HostAddress}}/api/bancosexternos/codigo/BCO001
Authorization: Bearer {{token}}

### 2Ô∏è‚É£9Ô∏è‚É£ Actualizar banco externo
PUT {{BankLink_HostAddress}}/api/bancosexternos/1
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "nombreBanco": "BancoCompa√±ero Actualizado",
  "codigoIdentificacion": "BCO001",
  "urlApiBase": "http://localhost:5002",
  "descripcion": "Banco del compa√±ero - URL actualizada",
  "activo": true
}

### ============================================================================
### üîÑ TRANSFERENCIAS (¬°LO M√ÅS IMPORTANTE DEL TP!)
### ============================================================================

### 3Ô∏è‚É£0Ô∏è‚É£ Obtener todas las transferencias
GET {{BankLink_HostAddress}}/api/transferencias
Authorization: Bearer {{token}}

### 3Ô∏è‚É£1Ô∏è‚É£ Transferencia INTERNA entre Cuenta 1 ‚Üí Cuenta 3
# ‚ö†Ô∏è Reemplaza el numeroCuentaDestino con el n√∫mero real de la cuenta 3
POST {{BankLink_HostAddress}}/api/transferencias/interna
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "idCuentaOrigen": 1,
  "numeroCuentaDestino": "98765432",
  "monto": 15000.00,
  "descripcion": "Transferencia interna - Pago de servicios"
}

### 3Ô∏è‚É£2Ô∏è‚É£ ‚≠ê Transferencia EXTERNA hacia BancoCompa√±ero
# ‚ö†Ô∏è Requiere que el banco externo est√© registrado y su API est√© corriendo
POST {{BankLink_HostAddress}}/api/transferencias/externa
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "idCuentaOrigen": 1,
  "numeroCuentaDestino": "11223344",
  "idBancoDestino": 1,
  "monto": 7000.00,
  "descripcion": "Transferencia externa - Pago a proveedor"
}

### 3Ô∏è‚É£3Ô∏è‚É£ üåê RECIBIR Transferencia EXTERNA (desde otro banco)
# ‚ö†Ô∏è Este endpoint es P√öBLICO (sin autenticaci√≥n)
# Los bancos externos lo llaman para enviarnos dinero
POST {{BankLink_HostAddress}}/api/transferencias/recibir
Content-Type: application/json

{
  "numeroCuentaDestino": "12345678",
  "monto": 12000.00,
  "bancoOrigen": "BancoCompa√±ero",
  "numeroCuentaOrigen": "99887766",
  "descripcion": "Transferencia recibida desde banco externo - Pago de cliente"
}

### 3Ô∏è‚É£4Ô∏è‚É£ Transferencia AUTOM√ÅTICA (detecta interna vs externa)
POST {{BankLink_HostAddress}}/api/transferencias/automatica
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "idCuentaOrigen": 2,
  "numeroCuentaDestino": "12345678",
  "monto": 5000.00,
  "descripcion": "Transferencia autom√°tica interna"
}

### 3Ô∏è‚É£5Ô∏è‚É£ Transferencia AUTOM√ÅTICA externa
POST {{BankLink_HostAddress}}/api/transferencias/automatica
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "idCuentaOrigen": 2,
  "numeroCuentaDestino": "33445566",
  "idBancoDestino": 2,
  "monto": 3000.00,
  "descripcion": "Transferencia autom√°tica externa - Banco Naci√≥n"
}

### 3Ô∏è‚É£6Ô∏è‚É£ Obtener transferencias de una cuenta espec√≠fica
GET {{BankLink_HostAddress}}/api/transferencias/cuenta/1
Authorization: Bearer {{token}}

### ============================================================================
### üß™ PRUEBAS DE VALIDACIONES Y ERRORES
### ============================================================================

### 3Ô∏è‚É£7Ô∏è‚É£ ‚ùå Intento de transferencia sin saldo suficiente
POST {{BankLink_HostAddress}}/api/transferencias/interna
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "idCuentaOrigen": 1,
  "numeroCuentaDestino": "98765432",
  "monto": 9999999.00,
  "descripcion": "Deber√≠a fallar por saldo insuficiente"
}

### 3Ô∏è‚É£8Ô∏è‚É£ ‚ùå Intento de acceso sin token JWT
GET {{BankLink_HostAddress}}/api/cuentas

### 3Ô∏è‚É£9Ô∏è‚É£ ‚ùå Intento de obtener cuenta inexistente
GET {{BankLink_HostAddress}}/api/cuentas/9999
Authorization: Bearer {{token}}

### 4Ô∏è‚É£0Ô∏è‚É£ ‚ùå Intento de dep√≥sito en cuenta inexistente
POST {{BankLink_HostAddress}}/api/cuentas/deposito
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "idCuenta": 9999,
  "monto": 1000.00,
  "descripcion": "Deber√≠a fallar - cuenta no existe"
}

### ============================================================================
### üìù NOTAS FINALES
### ============================================================================
# 
# ‚úÖ CHECKLIST PARA LA PRESENTACI√ìN:
# 
# 1. ‚úÖ Autenticaci√≥n JWT funcionando
# 2. ‚úÖ CRUD completo de Clientes, Cuentas, Movimientos
# 3. ‚úÖ Dep√≥sitos y retiros con validaciones
# 4. ‚úÖ Transferencias internas con consistencia transaccional
# 5. ‚úÖ Transferencias externas (enviar y recibir)
# 6. ‚úÖ Manejo de bancos externos
# 7. ‚úÖ C√≥digos HTTP apropiados (200, 201, 400, 404, 500)
# 8. ‚úÖ Validaciones de saldo, cuenta activa, etc.
# 
# üéØ DEMOSTRACI√ìN SUGERIDA:
# 1. Mostrar Swagger (documentaci√≥n autom√°tica)
# 2. Registrar cliente y hacer login
# 3. Crear cuentas con saldo inicial
# 4. Hacer dep√≥sito y retiro
# 5. Transferencia interna (mostrar que ambas cuentas se actualizan)
# 6. Transferencia externa (si tienes compa√±ero con API corriendo)
# 7. Consultar movimientos (extracto bancario)
# 8. Mostrar c√≥digo del TransferenciaDbService (BEGIN TRANSACTION)
# 
### ============================================================================
